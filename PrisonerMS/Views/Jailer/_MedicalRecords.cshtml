
@model Tuple<List<PrisonerMS.Models.Medical>, List<PrisonerMS.Models.Medication>, List<PrisonerMS.Models.Allergy>>

<h3 class="divheading text-center">Medical History</h3>
<hr class="hunderline" />

<div class="card rounded px-2 py-2">
    <div class="card-body">

        @if (Model != null)
        {
            if (Model.Item1 != null && Model.Item1.Count != 0)
            {
                <table id="example0" class="table table-striped table-bordered table-hover" cellspacing="0">
                    <tr>
                        <th>Number</th>
                        <th>Symptoms</th>
                        <th>Diagnosis</th>
                        <th>Entry Date</th>
                    </tr>
                    @foreach (var item in Model.Item1)
                    {
                <tr>
                    <td><a href="#" onclick="DetailMedicalfunction(@item.MedicalID)">@item.MedicalID</a></td>
                    <td>@item.Symptoms</td>
                    <td>@item.Diagnosis</td>
                    <td>@item.EntryDate</td>
                </tr>
                    }
                </table>
            }
        }

    </div>
</div>

<div class="modal fade" id="detailMedicalModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title divheading col-12 text-center">Medical Detail</h3>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body" id="detailMedicalModalBodyDiv1">
            </div>
        </div>
    </div>
</div>


<div id="demo1" class="collapse">
    <h3 class="divheading text-center my-2">Medications</h3>
    <hr class="hunderline" />

    <div class="card rounded px-2 py-2">
        <div class="card-body">
            @if (Model != null)
            {
                if (Model.Item2 != null && Model.Item2.Count != 0)
                {
                    <table id="example1" class="table table-striped table-bordered table-hover" cellspacing="0">
                        <tr>
                            <th>Description</th>
                            <th>Entry Date</th>
                            <th>Medical No</th>
                        </tr>
                        @foreach (var item in Model.Item2)
                        {
                            <tr>
                                <td>@item.Desc</td>
                                <td>@item.EntryDate</td>
                                <td><a href="#" onclick="DetailMedicalfunction(@item.Medical.MedicalID)">@item.Medical.MedicalID</a></td>
                            </tr>
                        }
                    </table>
                }
            }
        </div>

    </div>
</div>


<div id="demo2" class="collapse">
    <h3 class="divheading text-center my-2">Allergies</h3>
    <hr class="hunderline" />

    <div class="card rounded px-2 py-2">
        <div class="card-body">
            @if (Model != null)
            {
                if (Model.Item3 != null && Model.Item3.Count != 0)
                {
                    <table id="example2" class="table table-striped table-bordered table-hover" cellspacing="0">
                        <tr>
                            <th>Description</th>
                            <th>Entry Date</th>
                            <th>Medical No</th>
                        </tr>
                        @foreach (var item in Model.Item3)
                        {
                            <tr>
                                <td>@item.Desc</td>
                                <td>@item.EntryDate</td>
                                <td><a href="#" onclick="DetailMedicalfunction(@item.Medical.MedicalID)">@item.Medical.MedicalID</a></td>
                            </tr>
                        }
                    </table>
                }
            }
        </div>

    </div>
</div>


<div class="py-3">
    <button type="button" class="btn btn-info btn-lg mr-auto" data-toggle="collapse" data-target="#demo1">View All Medications</button>
    <button type="button" class="btn btn-info btn-lg mr-auto" data-toggle="collapse" data-target="#demo2">View All Alergies</button>
</div>



<script>

    var DetailMedicalfunction = function (mid) {

        var url = "/Jailer/DetailMedical?id=" + mid;

        $("#detailMedicalModalBodyDiv1").load(url, function () {
            $("#detailMedicalModal").modal("show");

        })
    }

</script>